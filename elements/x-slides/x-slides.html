<link rel="import" href="../../components/polymer/polymer.html">
<link rel="import" href="../x-slide/x-slide.html" />
<dom-module id="x-slides">
  <template>
    <style>
      :host {
        position: absolute;
        width: 100%;
        height: 100%;
        padding: 20px;
      }
    </style>

    <div div="container">
      <x-slide markdown="{{slide}}"></x-slide>
    </div>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'x-slides',

    properties: {
      markdown: {
        type: String
      },
      delimiter: {
        type: String,
        value: /- - -|---/gi
      },
      slides: {
        type: Array,
        notify: true
      },
      slide: {
        type: String,
        notify: true
      },
      count: {
        type: Number,
        notify: true
      },
      current: {
        type: Number,
        notify: true,
        value: 1
      },
      selected: {
        type: Number
      }
    },

    observers: [
      'on_change_markdown(markdown, delimiter)',
      'on_change_current(current, slides)'
    ],

    on_change_markdown: function (markdown, delimiter) {
      this.slides = markdown.split(delimiter);
      this.count = this.slides.length;
      // console.log(this.count);
    },

    on_change_current: function (current, slides) {
      if (current < 1) {
        current = this.count;
      }
      if (current > this.count) {
        current = 1;
      }
      this.slide = this.slides[current - 1];
    }

  });
</script>