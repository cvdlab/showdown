<link rel="import" href="../../components/polymer/polymer.html">
<script>
  Polymer({

    is: 'x-pager',

    properties: {
      count: {
        type: Number
      },
      current: {
        type: Number,
        notify: true
      },
      slides: {
        type: Array
      }
    },

    observers: [
      'on_change_slides(slides)',
      'on_change_current(current)'
    ],

    ready: function () {
      window.addEventListener("hashchange", this.on_change_hash.bind(this));
      this.current = +location.hash.slice(1) || 1;
    },

    on_change_slides: function () {
      console.log(this.current)
    },

    on_change_hash: function (event) {
      var current = +location.hash.slice(1);
      if (current < 1) {
        current = 1;
        history.replaceState('', '', '#1');
      }
      if (current > this.count) {
        current = this.count;
        history.replaceState('', '', '#' + current);
      }
      this.current = current;
    },

    on_change_current: function (current) {
      location.hash = current;
    }

  });
</script>
