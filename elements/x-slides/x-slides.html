<link rel="import" href="../../components/polymer/polymer.html">
<link rel="import" href="../x-slide/x-slide.html" />
<dom-module id="x-slides">
  <template>
    <style>
      :host {
        position: absolute;
        width: 100%;
        height: 100%;
        padding: 20px;
      }
    </style>

    <div div="container">
      <x-slide markdown="{{slide}}"></x-slide>
    </div>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'x-slides',

    properties: {
      markdown: {
        type: String
      },
      delimiter: {
        type: String,
        value: /- - -|---/gi
      },
      slides: {
        type: Array,
        notify: true
      },
      slide: {
        type: String,
        notify: true
      },
      count: {
        type: Number,
        notify: true
      },
      current: {
        type: Number,
        notify: true
      },
      selected: {
        type: Number,
        value: 0
      }
    },

    observers: [
      'on_change_markdown(markdown, delimiter)',
      'on_change_selected(selected)',
      'on_change_current(current)'
    ],

    on_change_markdown: function (markdown, delimiter) {
      this.slides = markdown.split(delimiter);
      this.count = this.slides.length;
      this.selected = 0;
      this.current = 0;
      console.log(this.selected, this.current, this.count);
    },

    on_change_selected: function (selected) {
      this.current = selected < 0 ? 0 : (selected > this.count ? this.count-1 : selected);
    },

    on_change_current: function (current) {
      this.slide = this.slides[current];
    }

  });
</script>